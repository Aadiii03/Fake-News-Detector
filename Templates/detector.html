{% extends "base.html" %}
{% block content %}

<section class="card detector-wrapper">
    <div class="detector-header">
        <div>
            <h1>Fake News Detector</h1>
            <p class="card-subtitle">Paste a news article or headline. The model will output a prediction and confidence score.</p>
        </div>
        <span class="pill pill-soft">Hybrid ML Â· TF-IDF + NB + LR</span>
    </div>

    <form method="POST" class="stack-form">
        <label class="field-label" for="news_text">News text</label>
        <textarea id="news_text" name="news_text" required placeholder="Paste full news text or a well-written summary here...">{{ request.form.get('news_text','') }}</textarea>
        <button type="submit" class="btn btn-primary align-right">Check Credibility</button>
    </form>

    {% if prediction %}
    <div class="result-section">
        <div class="result-main">
            <div class="badge-label">Model verdict</div>
            <div class="verdict-pill {% if prediction == 'FAKE' %}verdict-fake{% else %}verdict-real{% endif %}">
                {% if prediction == 'FAKE' %}Likely Fake{% else %}Likely Real{% endif %}
            </div>
            {% if score is not none %}
            <div class="confidence-line">
                Confidence score:
                <span class="confidence-value">{{ "%.2f"|format(score) }}%</span>
            </div>
            {% endif %}
            <p class="disclaimer">
                This score is based on patterns learned from historical data. For sensitive decisions, please confirm manually using the verification sources below.
            </p>
        </div>

        <div class="verify-panel">
            <h3>Verify this story on independent sources</h3>
            <p class="verify-text">Open one or more of these websites in a new tab and search the headline or key entities from your news.</p>

            <div class="verify-grid">
                <a class="verify-card" href="https://inshorts.com/en/read" target="_blank" rel="noopener">
                    <div class="verify-logo">IN</div>
                    <div class="verify-title">Inshorts</div>
                    <div class="verify-desc">Short news summaries for a quick cross-check.</div>
                </a>
                <a class="verify-card" href="https://www.reuters.com/" target="_blank" rel="noopener">
                    <div class="verify-logo">R</div>
                    <div class="verify-title">Reuters</div>
                    <div class="verify-desc">Global wire service with high editorial standards.</div>
                </a>
                <a class="verify-card" href="https://www.factcheck.org/" target="_blank" rel="noopener">
                    <div class="verify-logo">F</div>
                    <div class="verify-title">FactCheck.org</div>
                    <div class="verify-desc">US-focused fact-checking and analysis.</div>
                </a>
                <a class="verify-card" href="https://altnews.in/" target="_blank" rel="noopener">
                    <div class="verify-logo">A</div>
                    <div class="verify-title">Alt News</div>
                    <div class="verify-desc">India-focused misinformation debunking.</div>
                </a>
                <a class="verify-card" href="https://www.boomlive.in/" target="_blank" rel="noopener">
                    <div class="verify-logo">B</div>
                    <div class="verify-title">BOOM</div>
                    <div class="verify-desc">Fact-checking and myth-busting portal.</div>
                </a>
                <a class="verify-card" href="https://toolbox.google.com/factcheck/" target="_blank" rel="noopener">
                    <div class="verify-logo">G</div>
                    <div class="verify-title">Google Fact Check</div>
                    <div class="verify-desc">Aggregated fact checks from multiple outlets.</div>
                </a>
            </div>
        </div>
    </div>
    {% endif %}
</section>

{% endblock %}
